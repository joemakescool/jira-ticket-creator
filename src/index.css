@tailwind base;
@tailwind components;
@tailwind utilities;

/* Custom scrollbar */
@layer base {
  html, body, #root {
    min-height: 100vh;
    background-color: #eff6ff; /* blue-50 fallback */
  }

  .dark html, .dark body, .dark #root {
    background-color: #0f172a; /* slate-900 fallback */
  }

  * {
    scrollbar-width: thin;
    scrollbar-color: rgba(148, 163, 184, 0.3) transparent;
  }

  .dark * {
    scrollbar-color: rgba(100, 116, 139, 0.4) transparent;
  }

  *::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  *::-webkit-scrollbar-track {
    background: transparent;
    border-radius: 3px;
  }

  *::-webkit-scrollbar-thumb {
    background: rgba(148, 163, 184, 0.3);
    border-radius: 3px;
    transition: background 0.2s;
  }

  *::-webkit-scrollbar-thumb:hover {
    background: rgba(148, 163, 184, 0.5);
  }

  .dark *::-webkit-scrollbar-thumb {
    background: rgba(100, 116, 139, 0.4);
  }

  .dark *::-webkit-scrollbar-thumb:hover {
    background: rgba(100, 116, 139, 0.6);
  }

  *::-webkit-scrollbar-corner {
    background: transparent;
  }
}

/* Focus glow animation for inputs */
@layer utilities {
  .focus-glow {
    @apply transition-all duration-200 ease-out;
  }

  .focus-glow:focus {
    @apply ring-2 ring-blue-500/40 border-blue-500/60 shadow-[0_0_12px_rgba(59,130,246,0.15)];
  }

  .dark .focus-glow:focus {
    @apply ring-blue-400/30 border-blue-400/50 shadow-[0_0_12px_rgba(96,165,250,0.1)];
  }
}

/* Dropdown slide animations */
@keyframes dropdown-slide-in {
  from {
    opacity: 0;
    transform: translateY(-6px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes dropdown-slide-out {
  from {
    opacity: 1;
    transform: translateY(0);
  }
  to {
    opacity: 0;
    transform: translateY(-6px);
  }
}

.dropdown-enter {
  animation: dropdown-slide-in 0.12s ease-out forwards;
}

.dropdown-exit {
  animation: dropdown-slide-out 0.12s ease-in forwards;
}

/* Toolbar slide animation */
@keyframes toolbar-slide-in {
  from {
    opacity: 0;
    transform: translateY(-4px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.toolbar-enter {
  animation: toolbar-slide-in 0.15s ease-out forwards;
}

/* Shake animation for validation errors */
@keyframes shake {
  0%, 100% { transform: translateX(0); }
  10%, 30%, 50%, 70%, 90% { transform: translateX(-4px); }
  20%, 40%, 60%, 80% { transform: translateX(4px); }
}

.animate-shake {
  animation: shake 0.6s ease-in-out;
}

/* Theme toggle pulse for first visit */
@keyframes theme-pulse {
  0%, 100% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.4); }
  50% { box-shadow: 0 0 0 8px rgba(59, 130, 246, 0); }
}

.animate-theme-pulse {
  animation: theme-pulse 1.5s ease-in-out 3;
  border-color: rgba(59, 130, 246, 0.5);
}

/* Hint slide-in for adaptive form fields */
@keyframes hint-slide-in {
  from { opacity: 0; transform: translateY(-4px); }
  to { opacity: 1; transform: translateY(0); }
}

.hint-enter {
  animation: hint-slide-in 0.2s ease-out forwards;
}

/* Step view transition */
@keyframes step-fade-in {
  from { opacity: 0; transform: translateY(6px); }
  to { opacity: 1; transform: translateY(0); }
}

.step-enter {
  animation: step-fade-in 0.25s ease-out;
}

/* Selector button press effect */
@layer utilities {
  .press-effect {
    @apply transition-all duration-150 ease-out;
  }

  .press-effect:active {
    transform: scale(0.97);
  }
}
